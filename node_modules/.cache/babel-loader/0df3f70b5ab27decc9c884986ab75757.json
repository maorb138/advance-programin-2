{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\maorb\\\\OneDrive\\\\\\u05E9\\u05D5\\u05DC\\u05D7\\u05DF \\u05D4\\u05E2\\u05D1\\u05D5\\u05D3\\u05D4\\\\\\u05D4\\u05D2\\u05E9\\u05EA \\u05EA\\u05E8\\u05D2\\u05D9\\u05DC\\u05D9\\u05DD\\\\\\u05E9\\u05E0\\u05D4 \\u05D3'\\\\\\u05E1\\u05DE\\u05E1\\u05D8\\u05E8 \\u05D1'\\\\\\u05DE\\u05EA\\u05E7\\u05D3\\u05DD 2\\\\\\u05E9\\u05D1\\\\ass1.1\\\\advance-programin-2\\\\src\\\\components\\\\Register\\\\Register.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport './Register.css';\nimport React from 'react';\nimport './../DataBase/db.js';\nimport { useHistory } from \"react-router-dom\";\nimport users from './../DataBase/db.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Register(props) {\n  _s();\n\n  const history = useHistory();\n  const [err, seterr] = useState(\"\");\n\n  const registerValid = () => {\n    var username = document.getElementById(\"userName\").value;\n    var nickname = document.getElementById(\"nickname\").value;\n    var password = document.getElementById(\"password\").value;\n    var confirmPass = document.getElementById(\"confirmPass\").value;\n    var myImage = document.getElementById(\"image-input\").files.length;\n    props.func({\n      username: \"omri\",\n      password: \"1010\"\n    });\n    console.log(username, nickname, password, confirmPass);\n    passwordValidation(password, confirmPass);\n    NickNameValidation(nickname);\n    ImageValidation(myImage);\n    /*\r\n    props.users.push({ username: \"omri\", password: \"1010\" });\r\n    var new_users = props.users;    \r\n    console.log(new_users,11);\r\n    props.func(new_users);\r\n    var navLink = document.getElementsByClassName('nav-link');\r\n    navLink[0].style.visibility = \"hidden\";\r\n    navLink[1].style.visibility = \"hidden\";\r\n    */\n\n    console.log(username, nickname, password, confirmPass);\n\n    if (passwordValidation(password, confirmPass)) {\n      console.log(\"its ok\");\n    } else {\n      console.log(\"its NOT ok\");\n    }\n\n    function NickNameValidation(nickname) {\n      if (nickname === '') {\n        ////no nickname so i create a new one called NewnickName;\n        var threeLeeter = username.substring(0, 2);\n        var Newnickname = threeLeeter + Math.floor(Math.random() * 50) + Math.random().toString(36).replace(/[^a-z]+/g, '').substring(0, 2);\n        alert(\"you didnt chose nickname\");\n        alert(\"your nickname is:\" + Newnickname);\n        nickname = Newnickname;\n        return nickname;\n      } else {\n        ///he wrote nickname in field;\n        console.log(nickname);\n        return nickname;\n      }\n    }\n\n    var count = 0;\n    users.map(x => {\n      console.log(username);\n      console.log(\"user name =======\" + username);\n      console.log(\"count is :\" + count);\n\n      if (username === x.username && username == x.username) {\n        alert(\"An existing username in the system\");\n        count++;\n      }\n\n      if (username !== x.username && username != x.username) {}\n\n      if (count >= 1) {\n        history.push(\"/login\");\n      } else {\n        history.push(\"/chat\");\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    id: \"form1\",\n    className: \"row g-3\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header1\",\n      children: \" Sign-up\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"md-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"Username:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"userName\",\n        type: \"text\",\n        className: \"form-control inp\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"md-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"Nickname:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"nickname\",\n        type: \"text\",\n        className: \"form-control inp\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"md-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"password:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"password\",\n        type: \"password\",\n        className: \"form-control inp\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"md-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"confirm password:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"confirmPass\",\n        type: \"password\",\n        className: \"form-control inp\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        id: \"image-input\",\n        onClick: displayimage,\n        accept: \"image/jpeg, image/png, image/jpg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"display-image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-12\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        onClick: registerValid,\n        className: \"btn btn-primary mb-1\",\n        children: \"Sign-up\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Register, \"9UdJDY357fkwxEnYb2cB6ZunmSI=\", false, function () {\n  return [useHistory];\n});\n\n_c = Register;\nexport default Register;\n\nfunction passwordValidation(pass, confPass) {\n  //check if the password equal to the confirm password\n  if (pass !== confPass) {\n    console.log(\"invalid password\", pass);\n    alert();\n    return false; //check if the length of the password is at least 6 charcters\n  } else if (pass.length < 6) {\n    console.log(\"invalid password length\");\n    return false; //check if the password contains at least one capital letter\n  }\n\n  if (true) {\n    let count = 0;\n    let i = 65;\n\n    for (i; i <= 90; i++) {\n      if (pass.includes(String.fromCharCode(i))) count++;\n    }\n\n    if (count < 1) {\n      alert(\"need at least one capital letter\");\n      return false;\n    }\n  } //check if the password contains at least one small letter\n\n\n  if (true) {\n    let count = 0;\n    let i = 97;\n\n    for (i; i <= 122; i++) {\n      if (pass.includes(String.fromCharCode(i))) count++;\n    }\n\n    if (count < 1) {\n      alert(\"need at least one small letter\");\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction displayimage() {\n  const image_input = document.querySelector(\"#image-input\");\n  image_input.addEventListener(\"change\", function () {\n    const reader = new FileReader();\n    reader.addEventListener(\"load\", () => {\n      const uploaded_image = reader.result;\n      document.querySelector(\"#display-image\").style.backgroundImage = `url(${uploaded_image})`;\n    });\n    reader.readAsDataURL(this.files[0]);\n  });\n}\n\nfunction ImageValidation(myImage) {\n  if (myImage === 0) {\n    alert(\"you didnt choose any image\");\n    alert(\"this is your new profile image:\");\n    let i = Math.floor(Math.random() * 25);\n    var newImage = window.open('./Emoji/' + i + '.png', \"\", \"width=400,height=400\");\n    myImage = newImage;\n    return myImage;\n  } else {\n    return myImage;\n  }\n}\n\n_c2 = ImageValidation;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Register\");\n$RefreshReg$(_c2, \"ImageValidation\");","map":{"version":3,"sources":["C:/Users/maorb/OneDrive/שולחן העבודה/הגשת תרגילים/שנה ד'/סמסטר ב'/מתקדם 2/שב/ass1.1/advance-programin-2/src/components/Register/Register.js"],"names":["useState","React","useHistory","users","Register","props","history","err","seterr","registerValid","username","document","getElementById","value","nickname","password","confirmPass","myImage","files","length","func","console","log","passwordValidation","NickNameValidation","ImageValidation","threeLeeter","substring","Newnickname","Math","floor","random","toString","replace","alert","count","map","x","push","displayimage","pass","confPass","i","includes","String","fromCharCode","image_input","querySelector","addEventListener","reader","FileReader","uploaded_image","result","style","backgroundImage","readAsDataURL","newImage","window","open"],"mappings":"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","sourcesContent":["import { useState } from 'react';\r\nimport './Register.css';\r\nimport React from 'react';\r\nimport './../DataBase/db.js';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport  users from './../DataBase/db.js';\r\n\r\n\r\nfunction Register(props) {\r\n    const history = useHistory();\r\n    const [err, seterr] = useState(\"\");\r\n    const registerValid = () => {\r\n        var username = document.getElementById(\"userName\").value;\r\n        var nickname = document.getElementById(\"nickname\").value;\r\n        var password = document.getElementById(\"password\").value;\r\n        var confirmPass = document.getElementById(\"confirmPass\").value;\r\n        var myImage =  document.getElementById(\"image-input\").files.length \r\n        props.func({ username: \"omri\", password: \"1010\" });\r\n        console.log(username, nickname, password, confirmPass);\r\n        passwordValidation(password, confirmPass);\r\n         NickNameValidation(nickname);\r\n         ImageValidation(myImage);\r\n\r\n    \r\n        /*\r\n        props.users.push({ username: \"omri\", password: \"1010\" });\r\n        var new_users = props.users;    \r\n        console.log(new_users,11);\r\n        props.func(new_users);\r\n        var navLink = document.getElementsByClassName('nav-link');\r\n        navLink[0].style.visibility = \"hidden\";\r\n        navLink[1].style.visibility = \"hidden\";\r\n        */ \r\n        console.log(username, nickname, password, confirmPass);\r\n        if (passwordValidation(password, confirmPass)) {\r\n            console.log(\"its ok\");\r\n    \r\n            \r\n        } else {\r\n            console.log(\"its NOT ok\");\r\n        }\r\n\r\n        function NickNameValidation(nickname){\r\n            if(nickname===''){\r\n              ////no nickname so i create a new one called NewnickName;\r\n              var threeLeeter= username.substring(0,2);\r\n              var Newnickname=threeLeeter+Math.floor(Math.random() * 50)+Math.random().toString(36).replace(/[^a-z]+/g, '').substring(0, 2);\r\n              \r\n            alert(\"you didnt chose nickname\");\r\n            alert(\"your nickname is:\"+Newnickname);\r\n            nickname=Newnickname;\r\n              return nickname;\r\n            }else{\r\n                 ///he wrote nickname in field;\r\n                console.log(nickname)\r\n                return nickname;  \r\n            }\r\n        }\r\n        var count=0;\r\n        users.map((x) => {\r\n        \r\n            console.log(username);\r\n            console.log(\"user name =======\"+username);\r\n            console.log(\"count is :\"+count);\r\n            if (username === x.username && username == x.username) {\r\n                alert(\"An existing username in the system\");\r\n                count++;\r\n                    \r\n            }  if(username !== x.username && username!=x.username ){\r\n              \r\n            } \r\n            if(count>=1){\r\n               \r\n                history.push(\"/login\");\r\n            }else{\r\n                history.push(\"/chat\");\r\n\r\n            }\r\n        });\r\n\r\n\r\n  \r\n}\r\n    \r\n    return (\r\n        \r\n        <form id='form1' className=\"row g-3\">\r\n            <div className=\"header1\"> Sign-up</div>\r\n            <div className=\"md-4\">\r\n                <label className=\"form-label\">Username:</label>\r\n                <input id=\"userName\" type=\"text\"  className=\"form-control inp\" required></input>\r\n            </div>\r\n            <div className=\"md-4\">\r\n                <label className=\"form-label\">Nickname:</label>\r\n                <input id=\"nickname\" type=\"text\" className=\"form-control inp\" ></input>\r\n            </div>\r\n            <div className=\"md-4\">\r\n                <label className=\"form-label\">password:</label>\r\n                <input id=\"password\" type=\"password\" className=\"form-control inp\"  required></input>\r\n            </div>\r\n            <div className=\"md-4\">\r\n                <label className=\"form-label\">confirm password:</label>\r\n                <input id=\"confirmPass\" type=\"password\" className=\"form-control inp\" required></input>\r\n            </div>\r\n            <div>\r\n            <input type=\"file\" id=\"image-input\" onClick={displayimage} accept=\"image/jpeg, image/png, image/jpg\" />\r\n            <div id=\"display-image\" />\r\n             </div>\r\n            <div className=\"col-12\">\r\n                <button type=\"submit\" onClick={registerValid} className=\"btn btn-primary mb-1\">Sign-up</button>\r\n            </div>\r\n        </form>\r\n    );\r\n}\r\n\r\nexport default Register;\r\n\r\nfunction passwordValidation(pass, confPass) {\r\n    //check if the password equal to the confirm password\r\n    if (pass !== confPass) {\r\n        console.log(\"invalid password\", pass);\r\n      \r\n        alert()\r\n        return false;\r\n\r\n        //check if the length of the password is at least 6 charcters\r\n    } else if (pass.length < 6) {\r\n        console.log(\"invalid password length\");\r\n        return false;\r\n        //check if the password contains at least one capital letter\r\n    } if (true) {\r\n        let count = 0;\r\n        let i = 65;\r\n        for (i; i <= 90; i++) {\r\n            if (pass.includes(String.fromCharCode(i))) count++;\r\n        }\r\n        if (count < 1) {\r\n            alert(\"need at least one capital letter\");\r\n            return false;\r\n        }\r\n    }\r\n    //check if the password contains at least one small letter\r\n    if (true) {\r\n        let count = 0;\r\n        let i = 97;\r\n        for (i; i <= 122; i++) {\r\n            if (pass.includes(String.fromCharCode(i))) count++;\r\n        }\r\n        if (count < 1) {\r\n            alert(\"need at least one small letter\");\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction displayimage(){\r\n    const image_input = document.querySelector(\"#image-input\");\r\n\r\nimage_input.addEventListener(\"change\", function() {\r\n  const reader = new FileReader();\r\n  reader.addEventListener(\"load\", () => {\r\n    const uploaded_image = reader.result;\r\n    document.querySelector(\"#display-image\").style.backgroundImage = `url(${uploaded_image})`;\r\n  });\r\n  reader.readAsDataURL(this.files[0]);\r\n    });\r\n    }\r\n    function ImageValidation(myImage){\r\n        if(myImage===0){    \r\n            alert(\"you didnt choose any image\");\r\n            alert(\"this is your new profile image:\");\r\n            let i = Math.floor(Math.random() * 25);\r\n           var newImage=window.open('./Emoji/'+i+'.png', \"\", \"width=400,height=400\");\r\n           myImage=newImage;\r\n           return myImage;\r\n        }else{\r\n            return myImage;\r\n        }\r\n    }"]},"metadata":{},"sourceType":"module"}